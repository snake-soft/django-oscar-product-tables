{% load form_tags %}
{% load i18n %}
{% load static %}
{% load display_datatype_filters %}
{% load currency_filters %}

{% block extrahead %}
  <script src="https://unpkg.com/htmx.org@1.6.1" integrity="sha384-tvG/2mnCFmGQzYC1Oh3qxQ7CkQ9kMzYjWZSNtrRZygHPDDqottzEJsqS4oUVodhW" crossorigin="anonymous"></script>
{% endblock %}

<style>
#producttable td:hover{
  text-decoration: underline;
  background-color: #f7f7f7;
  cursor:pointer;
}
#producttable td{
  white-space:nowrap;
  border-right: 1px dotted lightgrey;
}
</style>

<table id="producttable" class="table table-hover table-sm table-responsive-md">
  <thead>
    <tr class="sticky-top bg-light">
      {% for col in table.cols %}
        <th scope="col" data-code="{{ col.code }}">{{ col.name }}</th>
      {% endfor %}
    </tr>
  </thead>
  <tbody>
    {% for row in table.rows %}
      <tr data-productid="{{ row.product.id }}">
        {% for cell in row.cells %}
          {% if cell.code == 'upc' %}
            <th style="position: sticky;">
              <a href="{% url 'dashboard:catalogue-product' row.product.id %}">
                {{ cell.data|display }}
              </a>
            </th>
          {% elif cell.enabled %}
            <td onclick="getForm($(this));">
              {{ cell.data|display }}
            </td>
          {% else %}
            <td style="color:#eee;cursor:no-drop;">n/a</td>
          {% endif %}
        {% endfor %}
      </tr>
    {% endfor %}
  </tbody>
</table>
